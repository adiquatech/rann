<section class="send-page">
  <div class="container">
    <h1>Send Anonymous Message</h1>

    <div class="public-link-section">
      <p class="label">Your Anonymous Link:</p>
      <div class="link-box">
        <code id="publicLink"><%= publicLink %></code>
        <button onclick="copyLink()" class="copy-btn">Copy</button>
      </div>
      <p class="hint">Share this link â€” anyone can message you anonymously.</p>
    </div>

    <% if (contacts.length > 0) { %>
      <div class="recent-contacts">
        <h2>Recent Contacts</h2>
        <p class="subtitle">Tap a contact to send an anonymous message</p>
        <div class="contacts-grid">
          <% contacts.forEach(contact => { %>
            <a href="/to/<%= contact.username %>" class="contact-card">
              <div class="contact-avatar">
                <%= contact.username.charAt(0).toUpperCase() %>
              </div>
              <span class="contact-name">@<%= contact.username %></span>
            </a>
          <% }) %>
        </div>
      </div>
    <% } %>

    <div class="manual-send">
  <h2>Send to New User</h2>
  <p class="subtitle">Enter a username to start a new conversation</p>
  <form id="manualSendForm" class="username-form">
    <div class="input-group">
      <input type="text" id="manualUsername" placeholder="Enter username" required autocomplete="off">
      <button type="submit" class="btn-primary">Send Message</button>
    </div>
  </form>
</div>

<script>
  document.getElementById('manualSendForm').addEventListener('submit', (e) => {
    e.preventDefault();
    const username = document.getElementById('manualUsername').value.trim();
    if (username) {
      window.location.href = `/to/${encodeURIComponent(username)}`;
    }
  });
</script>
  </div>
</section>