<div class="thread-container">
  <h1>Message Thread</h1>

  <a href="/messages/inbox">â† Back to Inbox</a>

  <!-- Original Message -->
  <div class="message-card original">
    <p><strong>From:</strong> <%= originalMessage.senderUsername %></p>
    <p><%= originalMessage.text %></p>
    <small><%= new Date(originalMessage.createdAt).toLocaleString() %></small>
  </div>

  <!-- Replies -->
  <% if (replies.length > 0) { %>
    <h3>Replies</h3>
    <% replies.forEach(reply => { %>
      <div class="message-card reply">
        <p><strong>From:</strong> <%= reply.senderUsername %></p>
        <p><%= reply.text %></p>
        <small><%= new Date(reply.createdAt).toLocaleString() %></small>
      </div>
    <% }) %>
  <% } %>

  <!-- Reply Form -->
  <% if (originalMessage.fromUserId) { %>
    <div class="reply-form">
      <h3>Send Reply</h3>
      <form action="/messages/reply" method="post">
        <input type="hidden" name="toUserId" value="<%= originalMessage.fromUserId %>">
        <textarea name="text" rows="4" placeholder="Write your reply..." required></textarea>
        <button type="submit">Send Reply</button>
      </form>
    </div>
  <% } %>
</div>